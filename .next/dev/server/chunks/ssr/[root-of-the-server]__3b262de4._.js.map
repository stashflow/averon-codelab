{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/emers/Documents/Averon%20Systems/ACL/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\n\nexport function createClient() {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\n  if (!supabaseUrl || !supabaseKey) {\n    console.error('[v0] Supabase environment variables are not set')\n    console.error('[v0] NEXT_PUBLIC_SUPABASE_URL:', supabaseUrl ? 'SET' : 'MISSING')\n    console.error('[v0] NEXT_PUBLIC_SUPABASE_ANON_KEY:', supabaseKey ? 'SET' : 'MISSING')\n    throw new Error('Supabase is not configured. Please add NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.')\n  }\n\n  return createBrowserClient(supabaseUrl, supabaseKey)\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACd,MAAM;IACN,MAAM;IAEN;;IAOA,OAAO,IAAA,iMAAmB,EAAC,aAAa;AAC1C"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/emers/Documents/Averon%20Systems/ACL/app/protected/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\n\nexport const dynamic = 'force-dynamic'\n\nexport default function ProtectedRoute() {\n  const router = useRouter()\n\n  useEffect(() => {\n    async function checkRoleAndRedirect() {\n      const supabase = createClient()\n\n      try {\n        const {\n          data: { user: authUser },\n          error: userError,\n        } = await supabase.auth.getUser()\n\n        if (userError || !authUser) {\n          router.push('/auth/login')\n          return\n        }\n\n        // Get user profile to check role\n        const { data: profile } = await supabase\n          .from('profiles')\n          .select('role')\n          .eq('id', authUser.id)\n          .single()\n\n        console.log('[v0] User role:', profile?.role)\n\n        // Check if user is a district admin\n        const { data: districtAdmin } = await supabase\n          .from('district_admins')\n          .select('id')\n          .eq('admin_id', authUser.id)\n          .single()\n\n        // Redirect based on role and district admin status\n        if (profile?.role === 'full_admin') {\n          router.push('/admin/panel')\n        } else if (districtAdmin) {\n          // District admin takes precedence over teacher role\n          router.push('/district/admin')\n        } else if (profile?.role === 'teacher') {\n          router.push('/protected/teacher')\n        } else if (profile?.role === 'student') {\n          router.push('/student/dashboard')\n        } else {\n          // Default to student dashboard if role is unclear\n          router.push('/student/dashboard')\n        }\n      } catch (err: any) {\n        console.error('[v0] Error checking role:', err)\n        router.push('/auth/login')\n      }\n    }\n\n    checkRoleAndRedirect()\n  }, [router])\n\n  return (\n    <div className=\"min-h-screen bg-black flex items-center justify-center\">\n      <div className=\"text-center\">\n        <div className=\"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n        <p className=\"text-white/70\">Redirecting to your dashboard...</p>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,MAAM,UAAU;AAER,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,MAAM,WAAW,IAAA,yIAAY;YAE7B,IAAI;gBACF,MAAM,EACJ,MAAM,EAAE,MAAM,QAAQ,EAAE,EACxB,OAAO,SAAS,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBAE/B,IAAI,aAAa,CAAC,UAAU;oBAC1B,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,iCAAiC;gBACjC,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,SAAS,EAAE,EACpB,MAAM;gBAET,QAAQ,GAAG,CAAC,mBAAmB,SAAS;gBAExC,oCAAoC;gBACpC,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,mBACL,MAAM,CAAC,MACP,EAAE,CAAC,YAAY,SAAS,EAAE,EAC1B,MAAM;gBAET,mDAAmD;gBACnD,IAAI,SAAS,SAAS,cAAc;oBAClC,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,eAAe;oBACxB,oDAAoD;oBACpD,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,SAAS,SAAS,WAAW;oBACtC,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,SAAS,SAAS,WAAW;oBACtC,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,kDAAkD;oBAClD,OAAO,IAAI,CAAC;gBACd;YACF,EAAE,OAAO,KAAU;gBACjB,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,OAAO,IAAI,CAAC;YACd;QACF;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;;;;;;;AAIrC"}}]
}